# 第五章 ～ ES 查询介绍小结

- ES 的查询可以分为`结构化`和`非结构化`查询两类。
- 结构化查询适用于非文本类字段，例如数值，关键字，或日期。这些字段在索引时不经过文本分析。
- 非结构化查询适用于文本类字段。非结构化查询会产生相关性(relevancy scoring)打分，ES 引擎会对文档根据匹配度进行打分。
- 对于结构化数据，我们使用`term-level查询`。对于非结构数据，我们使用`全文本查询`。
- 每一个查询请求首先由一个`协调者`节点接收并处理，由它协调分发到其它相关节点执行查询。这些相关节点执行查询并返回部分结果。协调者节点接收这些部分结果，聚合出最终结果，并将最终结果返回给客户端。
- `Query DSL` 是创建 ES 查询的推荐方式，它的表达能力要远优于基于 `URL + 查询参数`的方式。
- Query DSL 支持创建`叶子(leaf query)`或者`复合查询(compound query)`。叶子查询比较简单，只有一个查询条件。复合查询可以将多个查询条件通过逻辑关系组合起来。
- 有些跨横切面(cross-cutting)的功能是所有查询类别都支持的，比方说分页，排序，高亮，对打分的解释(explanation)，对结果进行定制化处理等等。
